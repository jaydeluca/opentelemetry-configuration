name: Synchronize Language Implementation Status

on:
  schedule:
    # Run nightly at 3 AM UTC
    - cron: '0 3 * * *'
  workflow_dispatch:
    inputs:
      target_repo_owner:
        description: 'Repository owner to create PR against (e.g., the name of a fork, or "open-telemetry" for upstream)'
        required: false
        type: string
        default: 'open-telemetry'
      target_branch:
        description: 'Target branch in opentelemetry.io repository (default: main)'
        required: false
        type: string
        default: 'main'

permissions:
  contents: read
  pull-requests: write

jobs:
  sync-language-implementation:
    uses: ./.github/workflows/sync-docs-reusable.yaml
    with:
      page_param: 'language-implementation'
      branch_prefix: 'config-lang-impl'
      commit_title: 'Update SDK configuration language implementation status'
      pr_title: 'Update SDK configuration language implementation status'
      pr_body_header: '## Update SDK Configuration Language Implementation Status

This PR updates the language implementation status tables for the OpenTelemetry SDK declarative configuration.'
      pr_body_changes: 'Language implementation status table updated with latest support information from the [opentelemetry-configuration](https://github.com/open-telemetry/opentelemetry-configuration) repository'
      target_repo_owner: ${{ inputs.target_repo_owner || 'open-telemetry' }}
      target_branch: ${{ inputs.target_branch || 'main' }}
    secrets:
      OTELBOT_GITHUB_APP_ID: ${{ secrets.OTELBOT_GITHUB_APP_ID }}
      OTELBOT_GITHUB_APP_PRIVATE_KEY: ${{ secrets.OTELBOT_GITHUB_APP_PRIVATE_KEY }}
      PAT_TOKEN: ${{ secrets.PAT_TOKEN }}
      DOCS_REPO_OWNER: ${{ secrets.DOCS_REPO_OWNER }}